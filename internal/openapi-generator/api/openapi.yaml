openapi: 3.0.0
info:
  contact:
    email: support@cockroachlabs.com
    name: Cockroach Labs Support
    url: https://support.cockroachlabs.com
  description: "This is a preview version of the Cloud API. The interface and output\
    \ is subject to change, and there may be bugs."
  title: CockroachDB Cloud API
  version: 2022-09-20
externalDocs:
  description: Use the CockroachDB Cloud API
  url: https://www.cockroachlabs.com/docs/cockroachcloud/cloud-api.html
servers:
- url: https://cockroachlabs.cloud
security:
- Bearer: []
tags:
- name: CockroachCloud
paths:
  /api/v1/cluster-versions:
    get:
      description: "Sort order: Version number descending"
      operationId: CockroachCloud_ListMajorClusterVersions
      parameters:
      - explode: true
        in: query
        name: pagination.page
        required: false
        schema:
          type: string
        style: form
      - explode: true
        in: query
        name: pagination.limit
        required: false
        schema:
          format: int32
          type: integer
        style: form
      - explode: true
        in: query
        name: pagination.as_of_time
        required: false
        schema:
          format: date-time
          type: string
        style: form
      - description: |2-
           - ASC: Sort in ascending order. This is the default unless otherwise specified.
           - DESC: Sort in descending order.
        explode: true
        in: query
        name: pagination.sort_order
        required: false
        schema:
          enum:
          - ASC
          - DESC
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListMajorClusterVersionsResponse'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: List available major cluster versions
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request GET \
            --url 'https://cockroachlabs.cloud/api/v1/cluster-versions?pagination.page=SOME_STRING_VALUE&pagination.limit=SOME_INTEGER_VALUE&pagination.as_of_time=SOME_STRING_VALUE&pagination.sort_order=SOME_STRING_VALUE' \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
  /api/v1/clusters:
    get:
      description: "Sort order: Cluster name"
      operationId: CockroachCloud_ListClusters
      parameters:
      - description: "If `true`, show clusters that have been deleted or failed to\
          \ initialize."
        explode: true
        in: query
        name: show_inactive
        required: false
        schema:
          default: false
          type: boolean
        style: form
      - explode: true
        in: query
        name: pagination.page
        required: false
        schema:
          type: string
        style: form
      - explode: true
        in: query
        name: pagination.limit
        required: false
        schema:
          format: int32
          type: integer
        style: form
      - explode: true
        in: query
        name: pagination.as_of_time
        required: false
        schema:
          format: date-time
          type: string
        style: form
      - description: |2-
           - ASC: Sort in ascending order. This is the default unless otherwise specified.
           - DESC: Sort in descending order.
        explode: true
        in: query
        name: pagination.sort_order
        required: false
        schema:
          enum:
          - ASC
          - DESC
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListClustersResponse'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: List clusters owned by an organization
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request GET \
            --url 'https://cockroachlabs.cloud/api/v1/clusters?show_inactive=SOME_BOOLEAN_VALUE&pagination.page=SOME_STRING_VALUE&pagination.limit=SOME_INTEGER_VALUE&pagination.as_of_time=SOME_STRING_VALUE&pagination.sort_order=SOME_STRING_VALUE' \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
    post:
      operationId: CockroachCloud_CreateCluster
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateClusterRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cluster'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Create and initialize a new cluster
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request POST \
            --url https://cockroachlabs.cloud/api/v1/clusters \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN' \
            --header 'content-type: application/json' \
            --data '{"name":"test-cluster","provider":"GCP","spec":{"serverless":{"regions":["us-central1"],"spend_limit":0}}}'
  /api/v1/clusters/available-regions:
    get:
      description: "Sort order: Distance (based on client IP address)"
      operationId: CockroachCloud_ListAvailableRegions
      parameters:
      - description: |-
          Optional CloudProvider for filtering.

           - GCP: The Google Cloud Platform cloud provider.
           - AWS: The Amazon Web Services cloud provider.
        explode: true
        in: query
        name: provider
        required: false
        schema:
          enum:
          - GCP
          - AWS
          type: string
        style: form
      - description: Optional filter to only show regions available for serverless
          clusters.
        explode: true
        in: query
        name: serverless
        required: false
        schema:
          default: false
          type: boolean
        style: form
      - explode: true
        in: query
        name: pagination.page
        required: false
        schema:
          type: string
        style: form
      - explode: true
        in: query
        name: pagination.limit
        required: false
        schema:
          format: int32
          type: integer
        style: form
      - explode: true
        in: query
        name: pagination.as_of_time
        required: false
        schema:
          format: date-time
          type: string
        style: form
      - description: |2-
           - ASC: Sort in ascending order. This is the default unless otherwise specified.
           - DESC: Sort in descending order.
        explode: true
        in: query
        name: pagination.sort_order
        required: false
        schema:
          enum:
          - ASC
          - DESC
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListAvailableRegionsResponse'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: List the regions available for new clusters and nodes
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request GET \
            --url 'https://cockroachlabs.cloud/api/v1/clusters/available-regions?provider=SOME_STRING_VALUE&serverless=SOME_BOOLEAN_VALUE&pagination.page=SOME_STRING_VALUE&pagination.limit=SOME_INTEGER_VALUE&pagination.as_of_time=SOME_STRING_VALUE&pagination.sort_order=SOME_STRING_VALUE' \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
  /api/v1/clusters/{cluster_id}:
    delete:
      operationId: CockroachCloud_DeleteCluster
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cluster'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Delete a cluster and all of its data
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request DELETE \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id} \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
    get:
      operationId: CockroachCloud_GetCluster
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cluster'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Get extended information about a cluster
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request GET \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id} \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
    patch:
      operationId: CockroachCloud_UpdateCluster
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateClusterSpecification'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Cluster'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Scale or edit a cluster
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request PATCH \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id} \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN' \
            --header 'content-type: application/json' \
            --data '{"dedicated":{"hardware":{"machine_spec":{"machine_type":"n2-standard-8"}},"region_nodes":{"us-central1":5,"us-west1":3}},"upgrade_status":"UPGRADE_RUNNING"}'
  /api/v1/clusters/{cluster_id}/cmek:
    get:
      operationId: CockroachCloud_GetCMEKClusterInfo
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CMEKClusterInfo'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Get CMEK-related information for a cluster
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request GET \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/cmek \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
    patch:
      operationId: CockroachCloud_UpdateCMEKStatus
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCMEKStatusRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CMEKClusterInfo'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Update the CMEK-related status for a cluster
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request PATCH \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/cmek \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN' \
            --header 'content-type: application/json' \
            --data '{"action":"REVOKE"}'
    post:
      operationId: CockroachCloud_EnableCMEKSpec
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CMEKClusterSpecification'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CMEKClusterInfo'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Enable CMEK for a cluster
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request POST \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/cmek \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN' \
            --data '{"region_specs":[{"key_spec":{"auth_principal":"arn:aws:iam::account:role/role-name-with-path","type":"AWS_KMS","uri":"arn:aws:kms:us-west-2:111122223333:key/id-of-kms-key"},"region":"us-central1"}]}'
    put:
      operationId: CockroachCloud_UpdateCMEKSpec
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CMEKClusterSpecification'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CMEKClusterInfo'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Enable or update the CMEK spec for a cluster
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request PUT \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/cmek \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN' \
            --data '{"region_specs":[{"key_spec":{"auth_principal":"arn:aws:iam::account:role/role-name-with-path","type":"AWS_KMS","uri":"arn:aws:kms:us-west-2:111122223333:key/id-of-kms-key"},"region":"us-central1"}]}'
  /api/v1/clusters/{cluster_id}/connection-string:
    get:
      operationId: CockroachCloud_GetConnectionString
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - explode: true
        in: query
        name: database
        required: false
        schema:
          default: defaultdb
          type: string
        style: form
      - explode: true
        in: query
        name: sql_user
        required: false
        schema:
          type: string
        style: form
      - description: |-
          os indicates the target operating system, used with formatting the default SSL certificate path.
          Required only for dedicated clusters.
        explode: true
        in: query
        name: os
        required: false
        schema:
          enum:
          - OS_MAC
          - OS_LINUX
          - OS_WINDOWS
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetConnectionStringResponse'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Get a formatted generic connection string for a cluster
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request GET \
            --url 'https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/connection-string?database=SOME_STRING_VALUE&sql_user=SOME_STRING_VALUE&os=SOME_STRING_VALUE' \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
  /api/v1/clusters/{cluster_id}/databases:
    get:
      description: "Sort order: Database name ascending"
      operationId: CockroachCloud_ListDatabases
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - explode: true
        in: query
        name: pagination.page
        required: false
        schema:
          type: string
        style: form
      - explode: true
        in: query
        name: pagination.limit
        required: false
        schema:
          format: int32
          type: integer
        style: form
      - explode: true
        in: query
        name: pagination.as_of_time
        required: false
        schema:
          format: date-time
          type: string
        style: form
      - description: |2-
           - ASC: Sort in ascending order. This is the default unless otherwise specified.
           - DESC: Sort in descending order.
        explode: true
        in: query
        name: pagination.sort_order
        required: false
        schema:
          enum:
          - ASC
          - DESC
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/api.ListDatabasesResponse'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: List databases for a cluster
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request GET \
            --url 'https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/databases?pagination.page=SOME_STRING_VALUE&pagination.limit=SOME_INTEGER_VALUE&pagination.as_of_time=SOME_STRING_VALUE&pagination.sort_order=SOME_STRING_VALUE' \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
    patch:
      operationId: CockroachCloud_EditDatabase
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateDatabaseRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/api.Database'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Update a database
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request PATCH \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/databases \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN' \
            --header 'content-type: application/json' \
            --data '{"new_name":"example_new_database_name"}'
    post:
      operationId: CockroachCloud_CreateDatabase
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateDatabaseRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/api.Database'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Create a new database
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request POST \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/databases \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN' \
            --header 'content-type: application/json' \
            --data '{"name":"example_database_name"}'
  /api/v1/clusters/{cluster_id}/databases/{name}:
    delete:
      operationId: CockroachCloud_DeleteDatabase
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: path
        name: name
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/api.Database'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Delete a database
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request DELETE \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/databases/{name} \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
  /api/v1/clusters/{cluster_id}/logexport:
    delete:
      operationId: CockroachCloud_DeleteLogExport
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LogExportClusterInfo'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Delete the Log Export configuration for a cluster
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request DELETE \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/logexport \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
    get:
      operationId: CockroachCloud_GetLogExportInfo
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LogExportClusterInfo'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Get the Log Export configuration for a cluster
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request GET \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/logexport \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
    post:
      operationId: CockroachCloud_EnableLogExport
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EnableLogExportRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LogExportClusterInfo'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Create or update the Log Export configuration for a cluster
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request POST \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/logexport \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN' \
            --header 'content-type: application/json' \
            --data '{"auth_principal":"my-gcp-project-id","groups":[{"channels":["OPS","HEALTH"],"log_name":"devops","min_level":"WARNING"}],"log_name":"default","redact":true,"type":"GCP_CLOUD_LOGGING"}'
  /api/v1/clusters/{cluster_id}/metricexport:
    delete:
      operationId: CockroachCloud_DeleteMetricExport
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - explode: true
        in: query
        name: type
        required: false
        schema:
          enum:
          - DATADOG
          - CLOUDWATCH
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteMetricExportResponse'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Delete the Metric Export configuration for a cluster
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request DELETE \
            --url 'https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/metricexport?type=SOME_STRING_VALUE' \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
    get:
      operationId: CockroachCloud_GetMetricExportInfo
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MetricExportInfo'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: |-
        Metric export
        Get the Metric Export configuration for a cluster
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request GET \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/metricexport \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
    post:
      operationId: CockroachCloud_EnableMetricExport
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EnableMetricExportRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MetricExportInfo'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Create or update the Metric Export configuration for a cluster
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request POST \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/metricexport \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN' \
            --header 'content-type: application/json' \
            --data '{"datadog":{"api_key":"datadog_api_key","site":"US1"}}'
  /api/v1/clusters/{cluster_id}/networking/allowlist:
    get:
      description: "Sort order: CIDR address"
      operationId: CockroachCloud_ListAllowlistEntries
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - explode: true
        in: query
        name: pagination.page
        required: false
        schema:
          type: string
        style: form
      - explode: true
        in: query
        name: pagination.limit
        required: false
        schema:
          format: int32
          type: integer
        style: form
      - explode: true
        in: query
        name: pagination.as_of_time
        required: false
        schema:
          format: date-time
          type: string
        style: form
      - description: |2-
           - ASC: Sort in ascending order. This is the default unless otherwise specified.
           - DESC: Sort in descending order.
        explode: true
        in: query
        name: pagination.sort_order
        required: false
        schema:
          enum:
          - ASC
          - DESC
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListAllowlistEntriesResponse'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Get the IP allowlist and propagation status for a cluster
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request GET \
            --url 'https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/networking/allowlist?pagination.page=SOME_STRING_VALUE&pagination.limit=SOME_INTEGER_VALUE&pagination.as_of_time=SOME_STRING_VALUE&pagination.sort_order=SOME_STRING_VALUE' \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
    post:
      operationId: CockroachCloud_AddAllowlistEntry
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AllowlistEntry'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AllowlistEntry'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Add a new CIDR address to the IP allowlist
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request POST \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/networking/allowlist \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN' \
            --header 'content-type: application/json' \
            --data '{"cidr_ip":"192.168.1.1","cidr_mask":32,"name":"Example","sql":true,"ui":true}'
  /api/v1/clusters/{cluster_id}/networking/allowlist/{cidr_ip}/{cidr_mask}:
    delete:
      operationId: CockroachCloud_DeleteAllowlistEntry
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: path
        name: cidr_ip
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: path
        name: cidr_mask
        required: true
        schema:
          format: int32
          type: integer
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AllowlistEntry'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Delete an IP allowlist entry
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request DELETE \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/networking/allowlist/{cidr_ip}/{cidr_mask} \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
  /api/v1/clusters/{cluster_id}/networking/allowlist/{entry.cidr_ip}/{entry.cidr_mask}:
    patch:
      operationId: CockroachCloud_UpdateAllowlistEntry
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: path
        name: entry.cidr_ip
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: path
        name: entry.cidr_mask
        required: true
        schema:
          format: int32
          type: integer
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AllowlistEntry_1'
        description: AllowlistEntry
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AllowlistEntry'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Update an IP allowlist entry
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request PATCH \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/networking/allowlist/{entry.cidr_ip}/{entry.cidr_mask} \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN' \
            --data '{"cidr_ip":"192.168.1.1","cidr_mask":32,"name":"Example","sql":true,"ui":true}'
    put:
      operationId: CockroachCloud_AddAllowlistEntry2
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: path
        name: entry.cidr_ip
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: path
        name: entry.cidr_mask
        required: true
        schema:
          format: int32
          type: integer
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AllowlistEntry_1'
        description: AllowlistEntry
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AllowlistEntry'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Add a new CIDR address to the IP allowlist
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request PUT \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/networking/allowlist/{entry.cidr_ip}/{entry.cidr_mask} \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN' \
            --data '{"cidr_ip":"192.168.1.1","cidr_mask":32,"name":"Example","sql":true,"ui":true}'
  /api/v1/clusters/{cluster_id}/networking/aws-endpoint-connections:
    get:
      operationId: CockroachCloud_ListAwsEndpointConnections
      parameters:
      - description: cluster_id is the ID for the cluster.
        explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AwsEndpointConnections'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Lists all AwsEndpointConnections for a given cluster
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request GET \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/networking/aws-endpoint-connections \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
  /api/v1/clusters/{cluster_id}/networking/aws-endpoint-connections/{endpoint_id}:
    patch:
      description: |-
        The "status" in the returned proto does not reflect the latest post-update
        status, but rather the status before the state is transitioned.
      operationId: CockroachCloud_SetAwsEndpointConnectionState
      parameters:
      - description: cluster_id is the ID for the cluster.
        explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - description: endpoint_id is the ID for the VPC endpoint on the customer's
          side.
        explode: false
        in: path
        name: endpoint_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CockroachCloud_SetAwsEndpointConnectionState_request'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AwsEndpointConnection'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Sets the AWS Endpoint Connection state based on what is passed in the
        body
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request PATCH \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/networking/aws-endpoint-connections/{endpoint_id} \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN' \
            --header 'content-type: application/json' \
            --data '{"status":"ENDPOINT_AVAILABLE"}'
  /api/v1/clusters/{cluster_id}/networking/egress-rules:
    get:
      description: "Sort order: Name"
      operationId: CockroachCloud_ListEgressRules
      parameters:
      - description: |-
          cluster_id identifies the CockroachDB cluster owning the set of returned
          egress rules.
        explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - explode: true
        in: query
        name: pagination.page
        required: false
        schema:
          type: string
        style: form
      - explode: true
        in: query
        name: pagination.limit
        required: false
        schema:
          format: int32
          type: integer
        style: form
      - explode: true
        in: query
        name: pagination.as_of_time
        required: false
        schema:
          format: date-time
          type: string
        style: form
      - description: |2-
           - ASC: Sort in ascending order. This is the default unless otherwise specified.
           - DESC: Sort in descending order.
        explode: true
        in: query
        name: pagination.sort_order
        required: false
        schema:
          enum:
          - ASC
          - DESC
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListEgressRulesResponse'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: List all egress rules associates with a cluster
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request GET \
            --url 'https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/networking/egress-rules?pagination.page=SOME_STRING_VALUE&pagination.limit=SOME_INTEGER_VALUE&pagination.as_of_time=SOME_STRING_VALUE&pagination.sort_order=SOME_STRING_VALUE' \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
    post:
      operationId: CockroachCloud_AddEgressRule
      parameters:
      - description: cluster_id identifies the cluster to which this egress rule applies.
        explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AddEgressRuleRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AddEgressRuleResponse'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Add an egress rule
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request POST \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/networking/egress-rules \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN' \
            --header 'content-type: application/json' \
            --data '{"cluster_id":"35c4abb2-bb66-46d7-afed-25ebef5ed100","description":"egress for GCP storage buckets","destination":"storage.googleapis.com","name":"roach-buckets","paths":["/customer-managed-bucket-1/*","/customer-managed-bucket-2/*"],"ports":[443,80],"type":"FQDN"}'
  /api/v1/clusters/{cluster_id}/networking/egress-rules/egress-traffic-policy:
    post:
      operationId: CockroachCloud_SetEgressTrafficPolicy
      parameters:
      - description: cluster_id identifies the cluster whose egress policy will be
          updated.
        explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SetEgressTrafficPolicyRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                type: object
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Outbound traffic management
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request POST \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/networking/egress-rules/egress-traffic-policy \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN' \
            --header 'content-type: application/json' \
            --data '{"allow_all":true,"idempotency_key":"string"}'
  /api/v1/clusters/{cluster_id}/networking/egress-rules/{rule_id}:
    delete:
      operationId: CockroachCloud_DeleteEgressRule
      parameters:
      - description: cluster_id uniquely identifies the cluster owning the egress
          rule.
        explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - description: rule_id is the UUID of an existing egress rule. This field is
          required.
        explode: false
        in: path
        name: rule_id
        required: true
        schema:
          type: string
        style: simple
      - description: |-
          idempotency_key uniquely identifies this request. If not set, it will be
          set by the server.
        explode: true
        in: query
        name: idempotency_key
        required: false
        schema:
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DeleteEgressRuleResponse'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Delete an existing egress rule
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request DELETE \
            --url 'https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/networking/egress-rules/{rule_id}?idempotency_key=SOME_STRING_VALUE' \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
    get:
      operationId: CockroachCloud_GetEgressRule
      parameters:
      - description: cluster_id uniquely identifies the cluster owning the egress
          rule.
        explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - description: rule_id is the UUID of an existing egress rule.
        explode: false
        in: path
        name: rule_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetEgressRuleResponse'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Get an existing egress rule
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request GET \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/networking/egress-rules/{rule_id} \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
    patch:
      operationId: CockroachCloud_EditEgressRule
      parameters:
      - description: cluster_id uniquely identifies the cluster owning the egress
          rule.
        explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - description: rule_id is the UUID of an existing egress rule. This field is
          required.
        explode: false
        in: path
        name: rule_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EditEgressRuleRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/EditEgressRuleResponse'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Edit an existing egress rule
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request PATCH \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/networking/egress-rules/{rule_id} \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN' \
            --header 'content-type: application/json' \
            --data '{"cluster_id":"35c4abb2-bb66-46d7-afed-25ebef5ed100","ports":[443,80],"rule_id":"35c4abb2-bb66-46d7-afed-25ebef5ed2aa"}'
  /api/v1/clusters/{cluster_id}/networking/private-endpoint-services:
    get:
      description: The internal_dns property from the regions field in the ListClusters
        response can be used to connect to PrivateEndpointServices.
      operationId: CockroachCloud_ListPrivateEndpointServices
      parameters:
      - description: cluster_id is the ID for the cluster.
        explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PrivateEndpointServices'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Lists all PrivateEndpointServices for a given cluster
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request GET \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/networking/private-endpoint-services \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
    post:
      operationId: CockroachCloud_CreatePrivateEndpointServices
      parameters:
      - description: cluster_id is the ID for the cluster.
        explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              type: object
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PrivateEndpointServices'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Creates all PrivateEndpointServices for a given cluster
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request POST \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/networking/private-endpoint-services \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN' \
            --header 'content-type: application/json' \
            --data '{}'
  /api/v1/clusters/{cluster_id}/nodes:
    get:
      description: "Sort order: Region name, node name"
      operationId: CockroachCloud_ListClusterNodes
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - description: Optional filter to limit response to a single region.
        explode: true
        in: query
        name: region_name
        required: false
        schema:
          type: string
        style: form
      - explode: true
        in: query
        name: pagination.page
        required: false
        schema:
          type: string
        style: form
      - explode: true
        in: query
        name: pagination.limit
        required: false
        schema:
          format: int32
          type: integer
        style: form
      - explode: true
        in: query
        name: pagination.as_of_time
        required: false
        schema:
          format: date-time
          type: string
        style: form
      - description: |2-
           - ASC: Sort in ascending order. This is the default unless otherwise specified.
           - DESC: Sort in descending order.
        explode: true
        in: query
        name: pagination.sort_order
        required: false
        schema:
          enum:
          - ASC
          - DESC
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListClusterNodesResponse'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: List nodes for a cluster
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request GET \
            --url 'https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/nodes?region_name=SOME_STRING_VALUE&pagination.page=SOME_STRING_VALUE&pagination.limit=SOME_INTEGER_VALUE&pagination.as_of_time=SOME_STRING_VALUE&pagination.sort_order=SOME_STRING_VALUE' \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
  /api/v1/clusters/{cluster_id}/sql-users:
    get:
      description: "Sort order: Username"
      operationId: CockroachCloud_ListSQLUsers
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - explode: true
        in: query
        name: pagination.page
        required: false
        schema:
          type: string
        style: form
      - explode: true
        in: query
        name: pagination.limit
        required: false
        schema:
          format: int32
          type: integer
        style: form
      - explode: true
        in: query
        name: pagination.as_of_time
        required: false
        schema:
          format: date-time
          type: string
        style: form
      - description: |2-
           - ASC: Sort in ascending order. This is the default unless otherwise specified.
           - DESC: Sort in descending order.
        explode: true
        in: query
        name: pagination.sort_order
        required: false
        schema:
          enum:
          - ASC
          - DESC
          type: string
        style: form
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListSQLUsersResponse'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: List SQL users for a cluster
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request GET \
            --url 'https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/sql-users?pagination.page=SOME_STRING_VALUE&pagination.limit=SOME_INTEGER_VALUE&pagination.as_of_time=SOME_STRING_VALUE&pagination.sort_order=SOME_STRING_VALUE' \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
    post:
      operationId: CockroachCloud_CreateSQLUser
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSQLUserRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SQLUser'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Create a new SQL user
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request POST \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/sql-users \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN' \
            --header 'content-type: application/json' \
            --data '{"name":"example_username","password":"example_password"}'
  /api/v1/clusters/{cluster_id}/sql-users/{name}:
    delete:
      operationId: CockroachCloud_DeleteSQLUser
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: path
        name: name
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SQLUser'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Delete a SQL user
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request DELETE \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/sql-users/{name} \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
  /api/v1/clusters/{cluster_id}/sql-users/{name}/password:
    put:
      operationId: CockroachCloud_UpdateSQLUserPassword
      parameters:
      - explode: false
        in: path
        name: cluster_id
        required: true
        schema:
          type: string
        style: simple
      - explode: false
        in: path
        name: name
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSQLUserPasswordRequest'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SQLUser'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Update a SQL user's password
      tags:
      - CockroachCloud
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request PUT \
            --url https://cockroachlabs.cloud/api/v1/clusters/{cluster_id}/sql-users/{name}/password \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN' \
            --header 'content-type: application/json' \
            --data '{"password":"example_new_password"}'
  /api/v1/invoices:
    get:
      description: "Sort order: invoice start date ascending"
      operationId: CockroachCloud_ListInvoices
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListInvoicesResponse'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: List invoices for a given organization
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request GET \
            --url https://cockroachlabs.cloud/api/v1/invoices \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
  /api/v1/invoices/{invoice_id}:
    get:
      operationId: CockroachCloud_GetInvoice
      parameters:
      - description: |-
          invoice_id is the unique ID representing the invoice.
          invoice_id is used to retrieve a specific
          billing period's invoice.
        explode: false
        in: path
        name: invoice_id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Invoice'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Gets a specific invoice for an organization
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request GET \
            --url https://cockroachlabs.cloud/api/v1/invoices/{invoice_id} \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
  /api/v1/organization:
    get:
      operationId: CockroachCloud_GetOrganizationInfo
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Organization'
          description: A successful response.
        "400":
          content:
            application/json:
              schema: {}
          description: Returned when a request field is invalid.
        "401":
          content:
            application/json:
              schema: {}
          description: Returned when the token bearer cannot be authenticated.
        "403":
          content:
            application/json:
              schema: {}
          description: Returned when the user does not have permission to access the
            resource.
        "404":
          content:
            application/json:
              schema: {}
          description: Returned when the resource does not exist.
        "500":
          content:
            application/json:
              schema: {}
          description: Server error
        default:
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Status'
          description: An unexpected error response.
      summary: Get information about the caller's organization
      tags:
      - CockroachCloud
      x-badges:
      - color: blue
        label: PREVIEW
      x-codeSamples:
      - lang: Shell + Curl
        source: |-
          curl --request GET \
            --url https://cockroachlabs.cloud/api/v1/organization \
            --header 'Authorization: Bearer REPLACE_BEARER_TOKEN'
components:
  requestBodies:
    CockroachCloud_AddAllowlistEntry2Entry:
      content:
        application/json:
          schema:
            example:
              cidr_ip: 192.168.1.1
              cidr_mask: 32
              name: Example
              sql: true
              ui: true
            properties:
              name:
                type: string
              sql:
                type: boolean
              ui:
                type: boolean
            required:
            - sql
            - ui
            title: AllowlistEntry
            type: object
      description: AllowlistEntry
      required: true
    CockroachCloud_EnableCMEKSpecBody:
      content:
        application/json:
          schema:
            example:
              region_specs:
              - key_spec:
                  auth_principal: arn:aws:iam::account:role/role-name-with-path
                  type: AWS_KMS
                  uri: arn:aws:kms:us-west-2:111122223333:key/id-of-kms-key
                region: us-central1
            properties:
              region_specs:
                items:
                  $ref: '#/components/schemas/CMEKRegionSpecification'
                type: array
            required:
            - region_specs
            title: CMEKClusterSpecification
            type: object
      required: true
  schemas:
    AWSEndpointConnectionStatus:
      description: The statuses map to the statuses returned by the AWS API.
      enum:
      - ENDPOINT_PENDING
      - ENDPOINT_PENDING_ACCEPTANCE
      - ENDPOINT_AVAILABLE
      - ENDPOINT_DELETING
      - ENDPOINT_DELETED
      - ENDPOINT_REJECTED
      - ENDPOINT_FAILED
      - ENDPOINT_EXPIRED
      type: string
    AWSPrivateLinkServiceDetail:
      example:
        availability_zone_ids:
        - availability_zone_ids
        - availability_zone_ids
        service_name: service_name
        service_id: service_id
      properties:
        availability_zone_ids:
          description: |-
            availability_zone_ids are the identifiers for the availability zones
            that the service is available in.
          items:
            type: string
          type: array
        service_id:
          description: |-
            service_id is the server side of the PrivateLink
            connection. This is the same as AWSPrivateLinkEndpoint.service_id.
          type: string
        service_name:
          description: |-
            service_name is the AWS service name customers use to create endpoints
            on their end.
          type: string
      required:
      - availability_zone_ids
      - service_id
      - service_name
      type: object
    AddEgressRuleResponse:
      description: AddEgressRuleResponse is the response message of the AddEgressRule
        RPC.
      example:
        Rule:
          crl_managed: true
          cluster_id: cluster_id
          paths:
          - paths
          - paths
          destination: destination
          name: name
          created_at: 2000-01-23T04:56:07.000+00:00
          description: description
          id: id
          state: state
          ports:
          - 0
          - 0
          type: type
      properties:
        Rule:
          $ref: '#/components/schemas/EgressRule'
      required:
      - rule
      title: AddEgressRuleResponse
      type: object
    AllowlistEntry:
      example:
        cidr_ip: 192.168.1.1
        cidr_mask: 32
        name: Example
        sql: true
        ui: true
      properties:
        cidr_ip:
          type: string
        cidr_mask:
          format: int32
          type: integer
        name:
          type: string
        sql:
          type: boolean
        ui:
          type: boolean
      required:
      - cidr_ip
      - cidr_mask
      - sql
      - ui
      title: AllowlistEntry
      type: object
    Any:
      additionalProperties: {}
      description: |-
        `Any` contains an arbitrary serialized protocol buffer message along with a
        URL that describes the type of the serialized message.

        Protobuf library provides support to pack/unpack Any values in the form
        of utility functions or additional generated methods of the Any type.

        Example 1: Pack and unpack a message in C++.

            Foo foo = ...;
            Any any;
            any.PackFrom(foo);
            ...
            if (any.UnpackTo(&foo)) {
              ...
            }

        Example 2: Pack and unpack a message in Java.

            Foo foo = ...;
            Any any = Any.pack(foo);
            ...
            if (any.is(Foo.class)) {
              foo = any.unpack(Foo.class);
            }

        Example 3: Pack and unpack a message in Python.

            foo = Foo(...)
            any = Any()
            any.Pack(foo)
            ...
            if any.Is(Foo.DESCRIPTOR):
              any.Unpack(foo)
              ...

        Example 4: Pack and unpack a message in Go

             foo := &pb.Foo{...}
             any, err := anypb.New(foo)
             if err != nil {
               ...
             }
             ...
             foo := &pb.Foo{}
             if err := any.UnmarshalTo(foo); err != nil {
               ...
             }

        The pack methods provided by protobuf library will by default use
        'type.googleapis.com/full.type.name' as the type URL and the unpack
        methods only use the fully qualified type name after the last '/'
        in the type URL, for example "foo.bar.com/x/y.z" will yield type
        name "y.z".


        JSON

        The JSON representation of an `Any` value uses the regular
        representation of the deserialized, embedded message, with an
        additional field `@type` which contains the type URL. Example:

            package google.profile;
            message Person {
              string first_name = 1;
              string last_name = 2;
            }

            {
              "@type": "type.googleapis.com/google.profile.Person",
              "firstName": <string>,
              "lastName": <string>
            }

        If the embedded message type is well-known and has a custom JSON
        representation, that representation will be embedded adding a field
        `value` which holds the custom JSON in addition to the `@type`
        field. Example (for message [google.protobuf.Duration][]):

            {
              "@type": "type.googleapis.com/google.protobuf.Duration",
              "value": "1.212s"
            }
      properties:
        '@type':
          description: |-
            A URL/resource name that uniquely identifies the type of the serialized
            protocol buffer message. This string must contain at least
            one "/" character. The last segment of the URL's path must represent
            the fully qualified name of the type (as in
            `path/google.protobuf.Duration`). The name should be in a canonical form
            (e.g., leading "." is not accepted).

            In practice, teams usually precompile into the binary all types that they
            expect it to use in the context of Any. However, for URLs which use the
            scheme `http`, `https`, or no scheme, one can optionally set up a type
            server that maps type URLs to message definitions as follows:

            * If no scheme is provided, `https` is assumed.
            * An HTTP GET on the URL must yield a [google.protobuf.Type][]
              value in binary format, or produce an error.
            * Applications are allowed to cache lookup results based on the
              URL, or have them precompiled into a binary to avoid any
              lookup. Therefore, binary compatibility needs to be preserved
              on changes to types. (Use versioned type names to manage
              breaking changes.)

            Note: this functionality is not currently available in the official
            protobuf release, and it is not used for type URLs beginning with
            type.googleapis.com.

            Schemes other than `http`, `https` (or the empty scheme) might be
            used with implementation specific semantics.
          type: string
      type: object
    AwsEndpointConnection:
      example:
        service_id: service_id
        endpoint_id: endpoint_id
        cloud_provider: null
        region_name: region_name
        status: null
      properties:
        cloud_provider:
          $ref: '#/components/schemas/api.CloudProvider'
        endpoint_id:
          description: endpoint_id is the client side of the PrivateLink connection.
          type: string
        region_name:
          description: region_name is the cloud provider region name (i.e. us-east-1).
          type: string
        service_id:
          description: |-
            service_id is the server side of the PrivateLink
            connection. This is the same as AWSPrivateLinkEndpoint.service_id.
          type: string
        status:
          $ref: '#/components/schemas/AWSEndpointConnectionStatus'
      required:
      - cloud_provider
      - endpoint_id
      - region_name
      - service_id
      - status
      type: object
    AwsEndpointConnections:
      example:
        connections:
        - service_id: service_id
          endpoint_id: endpoint_id
          cloud_provider: null
          region_name: region_name
          status: null
        - service_id: service_id
          endpoint_id: endpoint_id
          cloud_provider: null
          region_name: region_name
          status: null
      properties:
        connections:
          description: Connections is a list of private endpoints.
          items:
            $ref: '#/components/schemas/AwsEndpointConnection'
          type: array
      required:
      - connections
      type: object
    CMEKClusterInfo:
      description: |-
        CMEKClusterInfo contains the status of CMEK across an entire cluster,
        including within each one its regions.
      example:
        region_infos:
        - region: region
          key_infos:
          - updated_at: 2000-01-23T04:56:07.000+00:00
            created_at: 2000-01-23T04:56:07.000+00:00
            user_message: user_message
            spec:
              auth_principal: auth_principal
              type: null
              uri: uri
            status: null
          - updated_at: 2000-01-23T04:56:07.000+00:00
            created_at: 2000-01-23T04:56:07.000+00:00
            user_message: user_message
            spec:
              auth_principal: auth_principal
              type: null
              uri: uri
            status: null
          status: null
        - region: region
          key_infos:
          - updated_at: 2000-01-23T04:56:07.000+00:00
            created_at: 2000-01-23T04:56:07.000+00:00
            user_message: user_message
            spec:
              auth_principal: auth_principal
              type: null
              uri: uri
            status: null
          - updated_at: 2000-01-23T04:56:07.000+00:00
            created_at: 2000-01-23T04:56:07.000+00:00
            user_message: user_message
            spec:
              auth_principal: auth_principal
              type: null
              uri: uri
            status: null
          status: null
        status: null
      properties:
        region_infos:
          items:
            $ref: '#/components/schemas/CMEKRegionInfo'
          type: array
        status:
          $ref: '#/components/schemas/CMEKStatus'
      type: object
    CMEKCustomerAction:
      description: |-
        CMEKCustomerAction enumerates the actions a customer can take on a cluster
        that has been enabled for CMEK.
      enum:
      - REVOKE
      type: string
    CMEKKeyInfo:
      description: |-
        CMEKKeyInfo contains the status of a customer-provided key alongside the
        specification.
      example:
        updated_at: 2000-01-23T04:56:07.000+00:00
        created_at: 2000-01-23T04:56:07.000+00:00
        user_message: user_message
        spec:
          auth_principal: auth_principal
          type: null
          uri: uri
        status: null
      properties:
        created_at:
          format: date-time
          type: string
        spec:
          $ref: '#/components/schemas/CMEKKeySpecification'
        status:
          $ref: '#/components/schemas/CMEKStatus'
        updated_at:
          format: date-time
          type: string
        user_message:
          type: string
      type: object
    CMEKKeySpecification:
      description: "CMEKKeySpecification contains all the details necessary to use\
        \ a customer-provided\nencryption key.\n\nThis involves the type/location\
        \ of the key and the principal to authenticate as \nwhen accessing it."
      example:
        auth_principal: auth_principal
        type: null
        uri: uri
      properties:
        auth_principal:
          type: string
        type:
          $ref: '#/components/schemas/CMEKKeyType'
        uri:
          type: string
      type: object
    CMEKKeyType:
      description: "- UNKNOWN_KEY_TYPE: UNKNOWN should never be used; if it is used,\
        \ it indicates a bug."
      enum:
      - AWS_KMS
      - GCP_CLOUD_KMS
      - NULL_KMS
      title: CMEKKeyType enumerates types of customer-managed keys
      type: string
    CMEKRegionInfo:
      description: "CMEKRegionInfo contains the status of CMEK within a region.\n\n\
        This includes current and past key specifications used within the region,\
        \ \nas well as the status of those specifications"
      example:
        region: region
        key_infos:
        - updated_at: 2000-01-23T04:56:07.000+00:00
          created_at: 2000-01-23T04:56:07.000+00:00
          user_message: user_message
          spec:
            auth_principal: auth_principal
            type: null
            uri: uri
          status: null
        - updated_at: 2000-01-23T04:56:07.000+00:00
          created_at: 2000-01-23T04:56:07.000+00:00
          user_message: user_message
          spec:
            auth_principal: auth_principal
            type: null
            uri: uri
          status: null
        status: null
      properties:
        key_infos:
          items:
            $ref: '#/components/schemas/CMEKKeyInfo'
          type: array
        region:
          type: string
        status:
          $ref: '#/components/schemas/CMEKStatus'
      type: object
    CMEKRegionSpecification:
      description: |-
        CMEKRegionSpecification declares the customer-provided key specification that
        should be used in a given region.
      properties:
        key_spec:
          $ref: '#/components/schemas/CMEKKeySpecification'
        region:
          type: string
      type: object
    CMEKStatus:
      description: |-
        CMEKStatus describes the current status of CMEK for an entire CRDB cluster
        or a CMEK key within a region.

         - UNKNOWN_STATUS: UNKNOWN should never be used; if it is used, it indicates a bug.
         - DISABLED: DISABLED corresponds to the state of a cluster or region-level key when
        CMEK has finished being disabled. By default, CMEK will be disabled for
        new clusters.
         - DISABLING: DISABLING corresponds to the state of a cluster or region-level key when
        CMEK is in the process of being disabled.
         - DISABLE_FAILED: DISABLE_FAILED corresponds to the state of a cluster or region-level key
        when CMEK has failed to be disabled.
         - ENABLED: ENABLED corresponds to the state of a cluster or region-level key when
        CMEK is enabled.
         - ENABLING: ENABLING corresponds to the state of a cluster or region-level key when
        CMEK is in the process of being enabled.
         - ENABLE_FAILED: ENABLE_FAILED corresponds to the state of a cluster or region-level key
        when CMEK has failed to be enabled.
         - ROTATING: ROTATING corresponds to the state of a cluster or region when the a new
        spec is in the process of being enabled while an existing spec is being
        disabled.
         - ROTATE_FAILED: ROTATE_FAILED corresponds to the state of a cluster or region if there was
        a failure to update from one CMEK spec to another.
         - REVOKED: REVOKED corresponds to the state of a cluster or region-level key when the
        customer has revoked CockroachLab's permissions for their key.
         - REVOKING: REVOKING corresponds to the state of a cluster or region-level key when
        CMEK is in the process of being revoked.
         - REVOKE_FAILED: REVOKE_FAILED corresponds to the state of a cluster or region-level key
        when CMEK has failed to be revoked.
      enum:
      - DISABLED
      - DISABLING
      - DISABLE_FAILED
      - ENABLED
      - ENABLING
      - ENABLE_FAILED
      - ROTATING
      - ROTATE_FAILED
      - REVOKED
      - REVOKING
      - REVOKE_FAILED
      type: string
    CloudProviderRegion:
      example:
        distance: 0.8008282
        provider: null
        name: name
        serverless: true
        location: location
      properties:
        distance:
          format: float
          title: "Distance in miles, based on client IP address"
          type: number
        location:
          type: string
        name:
          type: string
        provider:
          $ref: '#/components/schemas/api.CloudProvider'
        serverless:
          type: boolean
      required:
      - distance
      - location
      - name
      - provider
      - serverless
      type: object
    CloudWatchConfig:
      example:
        target_region: target_region
        log_group_name: log_group_name
        role_arn: role_arn
      properties:
        log_group_name:
          description: log_group_name is the customized log group name.
          type: string
        role_arn:
          description: |-
            role_arn is the IAM role used to upload metric segments to the
            target AWS account.
          type: string
        target_region:
          description: |-
            target_region specifies the specific AWS region that the metrics will
            be exported to.
          type: string
      required:
      - role_arn
      type: object
    Cluster:
      example:
        account_id: ""
        cloud_provider: GCP
        cockroach_version: v21.2.4
        config:
          serverless:
            routing_id: example-cluster-1533
            spend_limit: 0
        created_at: 2022-03-22T20:23:11.285067Z
        creator_id: 7cde0cd9-0d8a-4008-8f90-45092ce8afc1
        deleted_at: null
        id: 35c4abb2-bb66-46d7-afed-25ebef5ed2aa
        name: example-cluster
        operation_status: CLUSTER_STATUS_UNSPECIFIED
        plan: SERVERLESS
        regions:
        - name: us-central1
          node_count: 0
          sql_dns: free-tier7.gcp-us-central1.crdb.io
          ui_dns: ""
        state: CREATED
        updated_at: 2022-03-22T20:23:11.879593Z
        upgrade_status: USING_LATEST
      properties:
        account_id:
          type: string
        cloud_provider:
          $ref: '#/components/schemas/api.CloudProvider'
        cockroach_version:
          type: string
        config:
          $ref: '#/components/schemas/ClusterConfig'
        created_at:
          format: date-time
          type: string
        creator_id:
          type: string
        deleted_at:
          format: date-time
          type: string
        egress_traffic_policy:
          $ref: '#/components/schemas/EgressTrafficPolicy'
        id:
          type: string
        name:
          type: string
        network_visibility:
          $ref: '#/components/schemas/NetworkVisiblity'
        operation_status:
          $ref: '#/components/schemas/ClusterStatusType'
        plan:
          $ref: '#/components/schemas/Plan'
        regions:
          items:
            $ref: '#/components/schemas/Region'
          type: array
        sql_dns:
          description: sql_dns is the DNS name of SQL interface of the cluster.
          type: string
        state:
          $ref: '#/components/schemas/ClusterStateType'
        updated_at:
          format: date-time
          type: string
        upgrade_status:
          $ref: '#/components/schemas/ClusterUpgradeStatus'
      required:
      - cloud_provider
      - cockroach_version
      - config
      - creator_id
      - id
      - name
      - operation_status
      - plan
      - regions
      - state
      - upgrade_status
      type: object
    ClusterConfig:
      properties:
        dedicated:
          $ref: '#/components/schemas/DedicatedHardwareConfig'
        serverless:
          $ref: '#/components/schemas/ServerlessClusterConfig'
      type: object
    ClusterMajorVersion:
      description: "For more information about CockroachDB cluster version support,\
        \ see https://www.cockroachlabs.com/docs/releases/release-support-policy.html"
      example:
        support_status: null
        version: version
      properties:
        support_status:
          $ref: '#/components/schemas/ClusterMajorVersionSupportStatus'
        version:
          type: string
      required:
      - support_status
      - version
      type: object
    ClusterMajorVersionSupportStatus:
      enum:
      - UNSUPPORTED
      - SUPPORTED
      - PREVIEW
      type: string
    ClusterStateType:
      description: |2-
         - LOCKED: An exclusive operation is being performed on this cluster.
        Other operations should not proceed if they did not set a cluster into the LOCKED state.
      enum:
      - CREATING
      - CREATED
      - CREATION_FAILED
      - DELETED
      - LOCKED
      type: string
    ClusterStatusType:
      enum:
      - CLUSTER_STATUS_UNSPECIFIED
      - CRDB_MAJOR_UPGRADE_RUNNING
      - CRDB_MAJOR_UPGRADE_FAILED
      - CRDB_MAJOR_ROLLBACK_RUNNING
      - CRDB_MAJOR_ROLLBACK_FAILED
      - CRDB_PATCH_RUNNING
      - CRDB_PATCH_FAILED
      - CRDB_SCALE_RUNNING
      - CRDB_SCALE_FAILED
      - MAINTENANCE_RUNNING
      - CRDB_INSTANCE_UPDATE_RUNNING
      - CRDB_INSTANCE_UPDATE_FAILED
      - CRDB_EDIT_CLUSTER_RUNNING
      - CRDB_EDIT_CLUSTER_FAILED
      - CRDB_CMEK_OPERATION_RUNNING
      - CRDB_CMEK_OPERATION_FAILED
      - TENANT_RESTORE_RUNNING
      - TENANT_RESTORE_FAILED
      - CRDB_LOG_EXPORT_OPERATION_RUNNING
      - CRDB_LOG_EXPORT_OPERATION_FAILED
      - CRDB_CLUSTER_DISRUPTION_RUNNING
      - CRDB_CLUSTER_DISRUPTION_FAILED
      - CRDB_REPAVE_RUNNING
      - CRDB_REPAVE_FAILED
      type: string
    ClusterUpgradeStatus:
      description: |2-
         - FINALIZED: The cluster is running the latest available CockroachDB version, and all upgrades have been finalized.
         - MAJOR_UPGRADE_RUNNING: An major version upgrade is currently in progress.
         - UPGRADE_AVAILABLE: An upgrade is available. If preview builds are enabled for the parent organization, this could indicate that a preview upgrade is available.
         - PENDING_FINALIZATION: An upgrade is complete, but pending finalization. Upgrades are automatically finalized after 72 hours. For more information, see https://www.cockroachlabs.com/docs/stable/upgrade-cockroach-version.html
         - ROLLBACK_RUNNING: A rollback operation is currently in progress.
      enum:
      - FINALIZED
      - MAJOR_UPGRADE_RUNNING
      - UPGRADE_AVAILABLE
      - PENDING_FINALIZATION
      - ROLLBACK_RUNNING
      type: string
    CreateClusterRequest:
      example:
        name: test-cluster
        provider: GCP
        spec:
          serverless:
            regions:
            - us-central1
            spend_limit: 0
      properties:
        name:
          description: |-
            Name must be 6-20 characters in length and can include numbers,
            lowercase letters, and dashes (but no leading or trailing dashes).
          type: string
        provider:
          $ref: '#/components/schemas/api.CloudProvider'
        spec:
          $ref: '#/components/schemas/CreateClusterSpecification'
      required:
      - name
      - provider
      - spec
      title: CreateClusterRequest
      type: object
    CreateClusterSpecification:
      properties:
        dedicated:
          $ref: '#/components/schemas/DedicatedClusterCreateSpecification'
        serverless:
          $ref: '#/components/schemas/ServerlessClusterCreateSpecification'
      type: object
    Currency:
      description: Currency is the set of currencies supported in CockroachDB Cloud.
      enum:
      - USD
      - CRDB_CLOUD_CREDITS
      type: string
    CurrencyAmount:
      example:
        amount: 0.8008281904610115
        currency: null
      properties:
        amount:
          description: amount is the quantity of currency.
          format: double
          type: number
        currency:
          $ref: '#/components/schemas/Currency'
      type: object
    DatadogConfig:
      example:
        site: null
        api_key: api_key
      properties:
        api_key:
          type: string
        site:
          $ref: '#/components/schemas/DatadogConfig.DatadogSite'
      required:
      - api_key
      - site
      type: object
    DatadogConfig.DatadogSite:
      enum:
      - US1
      - US3
      - US5
      - US1_GOV
      - EU1
      type: string
    DedicatedClusterCreateSpecification:
      properties:
        cockroach_version:
          description: |-
            The CockroachDB version for the cluster. The current version
            is used if omitted.
          type: string
        hardware:
          $ref: '#/components/schemas/DedicatedHardwareCreateSpecification'
        network_visibility:
          $ref: '#/components/schemas/NetworkVisiblity'
        region_nodes:
          additionalProperties:
            format: int32
            type: integer
          description: |-
            Region keys should match the cloud provider's zone code.
            For example, for Oregon, set region_name to "us-west2" for
            GCP and "us-west-2" for AWS. Values represent the node count.
          type: object
        restrict_egress_traffic:
          description: |-
            RestrictEgressTraffic if set, results in an egress traffic policy of
            default-deny at creation time.
          type: boolean
      required:
      - hardware
      - region_nodes
      type: object
    DedicatedClusterUpdateSpecification:
      properties:
        cmek_region_specs:
          description: |-
            This field should contain the CMEK specs for newly added regions. If a
            CMEK spec is provided for an existing region, the request is invalid and
            will fail.
          items:
            $ref: '#/components/schemas/CMEKRegionSpecification'
          type: array
        hardware:
          $ref: '#/components/schemas/DedicatedHardwareUpdateSpecification'
        region_nodes:
          additionalProperties:
            format: int32
            type: integer
          description: |-
            Region keys should match the cloud provider's zone code.
            For example, for Oregon, set region_name to "us-west2" for
            GCP and "us-west-2" for AWS. Values represent the node count.
          type: object
      type: object
    DedicatedHardwareConfig:
      properties:
        disk_iops:
          description: |-
            disk_iops is the number of disk I/O operations per second that are
            permitted on each node in the cluster. Zero indicates the cloud
            provider-specific default.
          format: int32
          type: integer
        machine_type:
          description: |-
            machine_type is the machine type identifier within the given cloud
            provider, ex. m5.xlarge, n2-standard-4.
          type: string
        memory_gib:
          description: memory_gib is the memory GiB per node in the cluster.
          format: float
          type: number
        num_virtual_cpus:
          description: num_virtual_cpus is the number of virtual CPUs per node in
            the cluster.
          format: int32
          type: integer
        storage_gib:
          description: storage_gib is the number of storage GiB per node in the cluster.
          format: int32
          type: integer
      required:
      - disk_iops
      - machine_type
      - memory_gib
      - num_virtual_cpus
      - storage_gib
      type: object
    DedicatedHardwareCreateSpecification:
      properties:
        disk_iops:
          description: |-
            disk_iops is the number of disk I/O operations per second that are
            permitted on each node in the cluster. Zero indicates the cloud
            provider-specific default. Only available for AWS clusters.
          format: int32
          type: integer
        machine_spec:
          $ref: '#/components/schemas/DedicatedMachineTypeSpecification'
        storage_gib:
          description: |-
            storage_gib is the number of storage GiB per node in the cluster.
            Zero indicates default to the lowest storage GiB available given machine specs.
          format: int32
          type: integer
      required:
      - machine_spec
      - storage_gib
      type: object
    DedicatedHardwareUpdateSpecification:
      properties:
        disk_iops:
          description: |-
            disk_iops is the number of disk I/O operations per second that are
            permitted on each node in the cluster. Zero indicates the cloud
            provider-specific default. Only available for AWS clusters.
          format: int32
          type: integer
        machine_spec:
          $ref: '#/components/schemas/DedicatedMachineTypeSpecification'
        storage_gib:
          description: storage_gib is the number of storage GiB per node in the cluster.
          format: int32
          type: integer
      type: object
    DedicatedMachineTypeSpecification:
      properties:
        machine_type:
          description: |-
            machine_type is the machine type identifier within the given cloud
            provider, ex. m5.xlarge, n2-standard-4.
          type: string
        num_virtual_cpus:
          description: |-
            num_virtual_cpus may be used to automatically select a machine type
            according to the desired number of vCPUs.
          format: int32
          type: integer
      type: object
    DeleteEgressRuleResponse:
      description: DeleteEgressRuleResponse is the output for the DeleteEgressRule
        RPC.
      example:
        Rule:
          crl_managed: true
          cluster_id: cluster_id
          paths:
          - paths
          - paths
          destination: destination
          name: name
          created_at: 2000-01-23T04:56:07.000+00:00
          description: description
          id: id
          state: state
          ports:
          - 0
          - 0
          type: type
      properties:
        Rule:
          $ref: '#/components/schemas/EgressRule'
      required:
      - rule
      title: DeleteEgressRuleResponse
      type: object
    DeleteMetricExportResponse:
      example:
        cluster_id: cluster_id
        type: null
        status: null
      properties:
        cluster_id:
          type: string
        status:
          $ref: '#/components/schemas/MetricExportStatus'
        type:
          $ref: '#/components/schemas/MetricExportIntegrationType'
      type: object
    EditEgressRuleResponse:
      description: EditEgressRuleResponse is the output message to the EditEgressRule
        RPC.
      example:
        Rule:
          crl_managed: true
          cluster_id: cluster_id
          paths:
          - paths
          - paths
          destination: destination
          name: name
          created_at: 2000-01-23T04:56:07.000+00:00
          description: description
          id: id
          state: state
          ports:
          - 0
          - 0
          type: type
      properties:
        Rule:
          $ref: '#/components/schemas/EgressRule'
      required:
      - rule
      title: EditEgressRuleResponse
      type: object
    EgressRule:
      description: EgressRule represents a network egress rule.
      example:
        crl_managed: true
        cluster_id: cluster_id
        paths:
        - paths
        - paths
        destination: destination
        name: name
        created_at: 2000-01-23T04:56:07.000+00:00
        description: description
        id: id
        state: state
        ports:
        - 0
        - 0
        type: type
      properties:
        cluster_id:
          description: cluster_id identifies the cluster to which this egress rule
            applies.
          type: string
        created_at:
          description: |-
            created_at is the time at which the time at which the egress rule was
            created.
          format: date-time
          type: string
        crl_managed:
          description: |-
            crl_managed indicates this egress rule is managed by CockroachDB Cloud
            services. This field is set by the server.
          type: boolean
        description:
          description: description is a longer that serves to document the rules purpose.
          type: string
        destination:
          description: |-
            destination is the endpoint (or subnetwork if CIDR) to which traffic is
            allowed.
          type: string
        id:
          description: id uniquely identifies this egress rule.
          type: string
        name:
          description: name is the name of the egress rule.
          type: string
        paths:
          description: paths are the allowed URL paths. Only valid if Type="FQDN".
          items:
            type: string
          type: array
        ports:
          description: |-
            ports are the allowed ports for TCP protocol. If Empty, all ports are
            allowed.
          items:
            format: int32
            type: integer
          type: array
        state:
          description: state indicates the state of the egress rule.
          type: string
        type:
          description: |-
            type classifies the destination field. Valid types include: "FQDN",
            "CIDR".
          type: string
      required:
      - cluster_id
      - crl_managed
      - description
      - destination
      - id
      - name
      - state
      - type
      title: EgressRule
      type: object
    EgressTrafficPolicy:
      description: |2-
         - POLICY_UNSPECIFIED: POLICY_UNSPECIFIED signifies the egress traffic policy is unspecified.
         - POLICY_ERROR: POLICY_ERROR signifies there has been an internal server error during
        an update to the egress traffic policy.
         - ALLOW_ALL: ALLOW_ALL signifies all outbound connections from CockroachDB are allowed.
         - DEFAULT_DENY: DEFAULT_DENY signifies that CockroachDB can only initiate network
        connections to destinations explicitly allowed by the user or CockroachDB
        Cloud operators.
         - POLICY_UPDATING: POLICY_UPDATING signifies the egress traffic policy is updating.
      enum:
      - POLICY_UNSPECIFIED
      - POLICY_ERROR
      - ALLOW_ALL
      - DEFAULT_DENY
      - POLICY_UPDATING
      type: string
    GetConnectionStringResponse:
      example:
        params:
          key: params
        connection_string: connection_string
      properties:
        connection_string:
          description: connection_string contains the full connection string with
            parameters formatted inline.
          type: string
        params:
          additionalProperties:
            type: string
          description: params contains a list of individual key parameters for generating
            nonstandard connection strings.
          type: object
      type: object
    GetEgressRuleResponse:
      description: GetEgressRuleResponse is the response message to the GetEgressRule
        RPC.
      example:
        rule:
          crl_managed: true
          cluster_id: cluster_id
          paths:
          - paths
          - paths
          destination: destination
          name: name
          created_at: 2000-01-23T04:56:07.000+00:00
          description: description
          id: id
          state: state
          ports:
          - 0
          - 0
          type: type
      properties:
        rule:
          $ref: '#/components/schemas/EgressRule'
      required:
      - rule
      title: GetEgressRuleResponse
      type: object
    Invoice:
      description: |-
        Invoice message represents the details and the total charges associated with
        one billing period, which starts at the beginning of the month and ends at
        the beginning of the next month.

        The message also includes details about each invoice item.
      example:
        period_end: 2000-01-23T04:56:07.000+00:00
        balances:
        - amount: 0.8008281904610115
          currency: null
        - amount: 0.8008281904610115
          currency: null
        invoice_items:
        - cluster:
            account_id: ""
            cloud_provider: GCP
            cockroach_version: v21.2.4
            config:
              serverless:
                routing_id: example-cluster-1533
                spend_limit: 0
            created_at: 2022-03-22T20:23:11.285067Z
            creator_id: 7cde0cd9-0d8a-4008-8f90-45092ce8afc1
            deleted_at: null
            id: 35c4abb2-bb66-46d7-afed-25ebef5ed2aa
            name: example-cluster
            operation_status: CLUSTER_STATUS_UNSPECIFIED
            plan: SERVERLESS
            regions:
            - name: us-central1
              node_count: 0
              sql_dns: free-tier7.gcp-us-central1.crdb.io
              ui_dns: ""
            state: CREATED
            updated_at: 2022-03-22T20:23:11.879593Z
            upgrade_status: USING_LATEST
          line_items:
          - quantity_unit: null
            total:
              amount: 0.8008281904610115
              currency: null
            quantity: 6.027456183070403
            description: description
            unit_cost: 1.4658129805029452
          - quantity_unit: null
            total:
              amount: 0.8008281904610115
              currency: null
            quantity: 6.027456183070403
            description: description
            unit_cost: 1.4658129805029452
          totals:
          - amount: 0.8008281904610115
            currency: null
          - amount: 0.8008281904610115
            currency: null
        - cluster:
            account_id: ""
            cloud_provider: GCP
            cockroach_version: v21.2.4
            config:
              serverless:
                routing_id: example-cluster-1533
                spend_limit: 0
            created_at: 2022-03-22T20:23:11.285067Z
            creator_id: 7cde0cd9-0d8a-4008-8f90-45092ce8afc1
            deleted_at: null
            id: 35c4abb2-bb66-46d7-afed-25ebef5ed2aa
            name: example-cluster
            operation_status: CLUSTER_STATUS_UNSPECIFIED
            plan: SERVERLESS
            regions:
            - name: us-central1
              node_count: 0
              sql_dns: free-tier7.gcp-us-central1.crdb.io
              ui_dns: ""
            state: CREATED
            updated_at: 2022-03-22T20:23:11.879593Z
            upgrade_status: USING_LATEST
          line_items:
          - quantity_unit: null
            total:
              amount: 0.8008281904610115
              currency: null
            quantity: 6.027456183070403
            description: description
            unit_cost: 1.4658129805029452
          - quantity_unit: null
            total:
              amount: 0.8008281904610115
              currency: null
            quantity: 6.027456183070403
            description: description
            unit_cost: 1.4658129805029452
          totals:
          - amount: 0.8008281904610115
            currency: null
          - amount: 0.8008281904610115
            currency: null
        period_start: 2000-01-23T04:56:07.000+00:00
        invoice_id: invoice_id
        totals:
        - amount: 0.8008281904610115
          currency: null
        - amount: 0.8008281904610115
          currency: null
      properties:
        balances:
          description: balances are the amounts of currency left at the time of the
            invoice.
          items:
            $ref: '#/components/schemas/CurrencyAmount'
          type: array
        invoice_id:
          description: invoice_id is the unique ID representing the invoice.
          type: string
        invoice_items:
          description: invoice_items are sorted by the cluster name.
          items:
            $ref: '#/components/schemas/InvoiceItem'
          type: array
        period_end:
          description: period_end is the end of the billing period (exclusive).
          format: date-time
          type: string
        period_start:
          description: period_start is the start of the billing period (inclusive).
          format: date-time
          type: string
        totals:
          description: totals is a list of the total amounts per currency.
          items:
            $ref: '#/components/schemas/CurrencyAmount'
          type: array
      required:
      - balances
      - invoice_id
      - invoice_items
      - period_end
      - period_start
      - totals
      type: object
    InvoiceItem:
      example:
        cluster:
          account_id: ""
          cloud_provider: GCP
          cockroach_version: v21.2.4
          config:
            serverless:
              routing_id: example-cluster-1533
              spend_limit: 0
          created_at: 2022-03-22T20:23:11.285067Z
          creator_id: 7cde0cd9-0d8a-4008-8f90-45092ce8afc1
          deleted_at: null
          id: 35c4abb2-bb66-46d7-afed-25ebef5ed2aa
          name: example-cluster
          operation_status: CLUSTER_STATUS_UNSPECIFIED
          plan: SERVERLESS
          regions:
          - name: us-central1
            node_count: 0
            sql_dns: free-tier7.gcp-us-central1.crdb.io
            ui_dns: ""
          state: CREATED
          updated_at: 2022-03-22T20:23:11.879593Z
          upgrade_status: USING_LATEST
        line_items:
        - quantity_unit: null
          total:
            amount: 0.8008281904610115
            currency: null
          quantity: 6.027456183070403
          description: description
          unit_cost: 1.4658129805029452
        - quantity_unit: null
          total:
            amount: 0.8008281904610115
            currency: null
          quantity: 6.027456183070403
          description: description
          unit_cost: 1.4658129805029452
        totals:
        - amount: 0.8008281904610115
          currency: null
        - amount: 0.8008281904610115
          currency: null
      properties:
        cluster:
          $ref: '#/components/schemas/Cluster'
        line_items:
          description: line_items contain all the relevant line items from the Metronome
            invoice.
          items:
            $ref: '#/components/schemas/LineItem'
          type: array
        totals:
          description: totals is a list of the total amounts of line items per currency.
          items:
            $ref: '#/components/schemas/CurrencyAmount'
          type: array
      required:
      - cluster
      - line_items
      - totals
      type: object
    KeysetPaginationRequest:
      properties:
        as_of_time:
          format: date-time
          type: string
        limit:
          format: int32
          type: integer
        page:
          type: string
        sort_order:
          $ref: '#/components/schemas/SortOrder'
      type: object
    KeysetPaginationResponse:
      example:
        next_page: next_page
        previous_page: previous_page
      properties:
        next_page:
          type: string
        previous_page:
          type: string
      type: object
    LineItem:
      example:
        quantity_unit: null
        total:
          amount: 0.8008281904610115
          currency: null
        quantity: 6.027456183070403
        description: description
        unit_cost: 1.4658129805029452
      properties:
        description:
          description: description contains the details of the line item (i.e t3 micro).
          type: string
        quantity:
          description: quantity is the number of the specific line items used.
          format: double
          type: number
        quantity_unit:
          $ref: '#/components/schemas/QuantityUnitType'
        total:
          $ref: '#/components/schemas/CurrencyAmount'
        unit_cost:
          description: unit_cost is the cost per unit of line item.
          format: double
          type: number
      required:
      - description
      - quantity
      - quantity_unit
      - total
      - unit_cost
      type: object
    ListAllowlistEntriesResponse:
      example:
        allowlist:
        - cidr_ip: 192.168.1.1
          cidr_mask: 32
          name: Example
          sql: true
          ui: true
        - cidr_ip: 192.168.1.1
          cidr_mask: 32
          name: Example
          sql: true
          ui: true
        pagination:
          next_page: next_page
          previous_page: previous_page
        propagating: true
      properties:
        allowlist:
          items:
            $ref: '#/components/schemas/AllowlistEntry'
          type: array
        pagination:
          $ref: '#/components/schemas/KeysetPaginationResponse'
        propagating:
          type: boolean
      required:
      - allowlist
      - propagating
      title: ListAllowlistEntriesResponse
      type: object
    ListAvailableRegionsResponse:
      example:
        pagination:
          next_page: next_page
          previous_page: previous_page
        regions:
        - distance: 0.8008282
          provider: null
          name: name
          serverless: true
          location: location
        - distance: 0.8008282
          provider: null
          name: name
          serverless: true
          location: location
      properties:
        pagination:
          $ref: '#/components/schemas/KeysetPaginationResponse'
        regions:
          items:
            $ref: '#/components/schemas/CloudProviderRegion'
          type: array
      required:
      - regions
      type: object
    ListClusterNodesResponse:
      example:
        nodes:
        - name: name
          region_name: region_name
          status: null
        - name: name
          region_name: region_name
          status: null
        pagination:
          next_page: next_page
          previous_page: previous_page
      properties:
        nodes:
          items:
            $ref: '#/components/schemas/Node'
          type: array
        pagination:
          $ref: '#/components/schemas/KeysetPaginationResponse'
      required:
      - nodes
      type: object
    ListClustersResponse:
      example:
        pagination:
          next_page: next_page
          previous_page: previous_page
        clusters:
        - account_id: ""
          cloud_provider: GCP
          cockroach_version: v21.2.4
          config:
            serverless:
              routing_id: example-cluster-1533
              spend_limit: 0
          created_at: 2022-03-22T20:23:11.285067Z
          creator_id: 7cde0cd9-0d8a-4008-8f90-45092ce8afc1
          deleted_at: null
          id: 35c4abb2-bb66-46d7-afed-25ebef5ed2aa
          name: example-cluster
          operation_status: CLUSTER_STATUS_UNSPECIFIED
          plan: SERVERLESS
          regions:
          - name: us-central1
            node_count: 0
            sql_dns: free-tier7.gcp-us-central1.crdb.io
            ui_dns: ""
          state: CREATED
          updated_at: 2022-03-22T20:23:11.879593Z
          upgrade_status: USING_LATEST
        - account_id: ""
          cloud_provider: GCP
          cockroach_version: v21.2.4
          config:
            serverless:
              routing_id: example-cluster-1533
              spend_limit: 0
          created_at: 2022-03-22T20:23:11.285067Z
          creator_id: 7cde0cd9-0d8a-4008-8f90-45092ce8afc1
          deleted_at: null
          id: 35c4abb2-bb66-46d7-afed-25ebef5ed2aa
          name: example-cluster
          operation_status: CLUSTER_STATUS_UNSPECIFIED
          plan: SERVERLESS
          regions:
          - name: us-central1
            node_count: 0
            sql_dns: free-tier7.gcp-us-central1.crdb.io
            ui_dns: ""
          state: CREATED
          updated_at: 2022-03-22T20:23:11.879593Z
          upgrade_status: USING_LATEST
      properties:
        clusters:
          items:
            $ref: '#/components/schemas/Cluster'
          type: array
        pagination:
          $ref: '#/components/schemas/KeysetPaginationResponse'
      required:
      - clusters
      type: object
    ListEgressRulesResponse:
      description: ListEgressRulesResponse is the output for the ListEgressRules RPC.
      example:
        pagination:
          next_page: next_page
          previous_page: previous_page
        rules:
        - crl_managed: true
          cluster_id: cluster_id
          paths:
          - paths
          - paths
          destination: destination
          name: name
          created_at: 2000-01-23T04:56:07.000+00:00
          description: description
          id: id
          state: state
          ports:
          - 0
          - 0
          type: type
        - crl_managed: true
          cluster_id: cluster_id
          paths:
          - paths
          - paths
          destination: destination
          name: name
          created_at: 2000-01-23T04:56:07.000+00:00
          description: description
          id: id
          state: state
          ports:
          - 0
          - 0
          type: type
      properties:
        pagination:
          $ref: '#/components/schemas/KeysetPaginationResponse'
        rules:
          description: rules are the egress rules associated with the given CockroachDB
            cluster.
          items:
            $ref: '#/components/schemas/EgressRule'
          type: array
      title: ListEgressRulesResponse
      type: object
    ListInvoicesResponse:
      example:
        invoices:
        - period_end: 2000-01-23T04:56:07.000+00:00
          balances:
          - amount: 0.8008281904610115
            currency: null
          - amount: 0.8008281904610115
            currency: null
          invoice_items:
          - cluster:
              account_id: ""
              cloud_provider: GCP
              cockroach_version: v21.2.4
              config:
                serverless:
                  routing_id: example-cluster-1533
                  spend_limit: 0
              created_at: 2022-03-22T20:23:11.285067Z
              creator_id: 7cde0cd9-0d8a-4008-8f90-45092ce8afc1
              deleted_at: null
              id: 35c4abb2-bb66-46d7-afed-25ebef5ed2aa
              name: example-cluster
              operation_status: CLUSTER_STATUS_UNSPECIFIED
              plan: SERVERLESS
              regions:
              - name: us-central1
                node_count: 0
                sql_dns: free-tier7.gcp-us-central1.crdb.io
                ui_dns: ""
              state: CREATED
              updated_at: 2022-03-22T20:23:11.879593Z
              upgrade_status: USING_LATEST
            line_items:
            - quantity_unit: null
              total:
                amount: 0.8008281904610115
                currency: null
              quantity: 6.027456183070403
              description: description
              unit_cost: 1.4658129805029452
            - quantity_unit: null
              total:
                amount: 0.8008281904610115
                currency: null
              quantity: 6.027456183070403
              description: description
              unit_cost: 1.4658129805029452
            totals:
            - amount: 0.8008281904610115
              currency: null
            - amount: 0.8008281904610115
              currency: null
          - cluster:
              account_id: ""
              cloud_provider: GCP
              cockroach_version: v21.2.4
              config:
                serverless:
                  routing_id: example-cluster-1533
                  spend_limit: 0
              created_at: 2022-03-22T20:23:11.285067Z
              creator_id: 7cde0cd9-0d8a-4008-8f90-45092ce8afc1
              deleted_at: null
              id: 35c4abb2-bb66-46d7-afed-25ebef5ed2aa
              name: example-cluster
              operation_status: CLUSTER_STATUS_UNSPECIFIED
              plan: SERVERLESS
              regions:
              - name: us-central1
                node_count: 0
                sql_dns: free-tier7.gcp-us-central1.crdb.io
                ui_dns: ""
              state: CREATED
              updated_at: 2022-03-22T20:23:11.879593Z
              upgrade_status: USING_LATEST
            line_items:
            - quantity_unit: null
              total:
                amount: 0.8008281904610115
                currency: null
              quantity: 6.027456183070403
              description: description
              unit_cost: 1.4658129805029452
            - quantity_unit: null
              total:
                amount: 0.8008281904610115
                currency: null
              quantity: 6.027456183070403
              description: description
              unit_cost: 1.4658129805029452
            totals:
            - amount: 0.8008281904610115
              currency: null
            - amount: 0.8008281904610115
              currency: null
          period_start: 2000-01-23T04:56:07.000+00:00
          invoice_id: invoice_id
          totals:
          - amount: 0.8008281904610115
            currency: null
          - amount: 0.8008281904610115
            currency: null
        - period_end: 2000-01-23T04:56:07.000+00:00
          balances:
          - amount: 0.8008281904610115
            currency: null
          - amount: 0.8008281904610115
            currency: null
          invoice_items:
          - cluster:
              account_id: ""
              cloud_provider: GCP
              cockroach_version: v21.2.4
              config:
                serverless:
                  routing_id: example-cluster-1533
                  spend_limit: 0
              created_at: 2022-03-22T20:23:11.285067Z
              creator_id: 7cde0cd9-0d8a-4008-8f90-45092ce8afc1
              deleted_at: null
              id: 35c4abb2-bb66-46d7-afed-25ebef5ed2aa
              name: example-cluster
              operation_status: CLUSTER_STATUS_UNSPECIFIED
              plan: SERVERLESS
              regions:
              - name: us-central1
                node_count: 0
                sql_dns: free-tier7.gcp-us-central1.crdb.io
                ui_dns: ""
              state: CREATED
              updated_at: 2022-03-22T20:23:11.879593Z
              upgrade_status: USING_LATEST
            line_items:
            - quantity_unit: null
              total:
                amount: 0.8008281904610115
                currency: null
              quantity: 6.027456183070403
              description: description
              unit_cost: 1.4658129805029452
            - quantity_unit: null
              total:
                amount: 0.8008281904610115
                currency: null
              quantity: 6.027456183070403
              description: description
              unit_cost: 1.4658129805029452
            totals:
            - amount: 0.8008281904610115
              currency: null
            - amount: 0.8008281904610115
              currency: null
          - cluster:
              account_id: ""
              cloud_provider: GCP
              cockroach_version: v21.2.4
              config:
                serverless:
                  routing_id: example-cluster-1533
                  spend_limit: 0
              created_at: 2022-03-22T20:23:11.285067Z
              creator_id: 7cde0cd9-0d8a-4008-8f90-45092ce8afc1
              deleted_at: null
              id: 35c4abb2-bb66-46d7-afed-25ebef5ed2aa
              name: example-cluster
              operation_status: CLUSTER_STATUS_UNSPECIFIED
              plan: SERVERLESS
              regions:
              - name: us-central1
                node_count: 0
                sql_dns: free-tier7.gcp-us-central1.crdb.io
                ui_dns: ""
              state: CREATED
              updated_at: 2022-03-22T20:23:11.879593Z
              upgrade_status: USING_LATEST
            line_items:
            - quantity_unit: null
              total:
                amount: 0.8008281904610115
                currency: null
              quantity: 6.027456183070403
              description: description
              unit_cost: 1.4658129805029452
            - quantity_unit: null
              total:
                amount: 0.8008281904610115
                currency: null
              quantity: 6.027456183070403
              description: description
              unit_cost: 1.4658129805029452
            totals:
            - amount: 0.8008281904610115
              currency: null
            - amount: 0.8008281904610115
              currency: null
          period_start: 2000-01-23T04:56:07.000+00:00
          invoice_id: invoice_id
          totals:
          - amount: 0.8008281904610115
            currency: null
          - amount: 0.8008281904610115
            currency: null
      properties:
        invoices:
          description: invoices are sorted by period_start time.
          items:
            $ref: '#/components/schemas/Invoice'
          type: array
      required:
      - invoices
      type: object
    ListMajorClusterVersionsResponse:
      example:
        pagination:
          next_page: next_page
          previous_page: previous_page
        versions:
        - support_status: null
          version: version
        - support_status: null
          version: version
      properties:
        pagination:
          $ref: '#/components/schemas/KeysetPaginationResponse'
        versions:
          items:
            $ref: '#/components/schemas/ClusterMajorVersion'
          type: array
      required:
      - versions
      type: object
    ListSQLUsersResponse:
      example:
        pagination:
          next_page: next_page
          previous_page: previous_page
        users:
        - name: name
        - name: name
      properties:
        pagination:
          $ref: '#/components/schemas/KeysetPaginationResponse'
        users:
          items:
            $ref: '#/components/schemas/SQLUser'
          type: array
      required:
      - users
      type: object
    LogExportClusterInfo:
      description: |-
        LogExportClusterInfo contains a package of information that fully
        describes both the intended state of the log export configuration for
        a specific cluster but also some metadata around its deployment
        status, any error messages, and some timestamps.
      example:
        cluster_id: cluster_id
        updated_at: 2000-01-23T04:56:07.000+00:00
        created_at: 2000-01-23T04:56:07.000+00:00
        user_message: user_message
        spec:
          auth_principal: auth_principal
          log_name: log_name
          redact: true
          groups:
          - channels:
            - channels
            - channels
            log_name: log_name
            redact: true
            min_level: null
          - channels:
            - channels
            - channels
            log_name: log_name
            redact: true
            min_level: null
          region: region
          type: null
        status: null
      properties:
        cluster_id:
          type: string
        created_at:
          format: date-time
          type: string
        spec:
          $ref: '#/components/schemas/LogExportClusterSpecification'
        status:
          $ref: '#/components/schemas/LogExportStatus'
        updated_at:
          format: date-time
          type: string
        user_message:
          type: string
      type: object
    LogExportClusterSpecification:
      description: |-
        LogExportClusterSpecification contains all the data necessary to
        configure log export for an individual cluster. Users would supply
        this data via the API and also receive it back when inspecting the
        state of their log export configuration.
      example:
        auth_principal: auth_principal
        log_name: log_name
        redact: true
        groups:
        - channels:
          - channels
          - channels
          log_name: log_name
          redact: true
          min_level: null
        - channels:
          - channels
          - channels
          log_name: log_name
          redact: true
          min_level: null
        region: region
        type: null
      properties:
        auth_principal:
          description: |-
            auth_principal is either the AWS Role ARN that identifies a role
            that the cluster account can assume to write to CloudWatch or the
            GCP Project ID that the cluster service account has permissions to
            write to for cloud logging.
          type: string
        groups:
          description: |-
            groups is a collection of log group configurations to customize
            which CRDB channels get aggregated into different groups at the
            target sink. Unconfigured channels will be sent to the default
            locations via the settings above.
          items:
            $ref: '#/components/schemas/LogExportGroup'
          type: array
        log_name:
          description: log_name is an identifier for the logs in the customer's log
            sink.
          type: string
        redact:
          description: |-
            redact controls whether logs are redacted before forwarding to
            customer sinks. By default they are not redacted.
          type: boolean
        region:
          description: |-
            region controls whether all logs are sent to a specific region in
            the customer sink. By default, logs will remain their region of
            origin depending on the cluster node's region.
          type: string
        type:
          $ref: '#/components/schemas/LogExportType'
      type: object
    LogExportGroup:
      description: |-
        LogExportGroup contains an export configuration for a single
        log group which can route logs for a subset of CRDB channels.
      example:
        channels:
        - channels
        - channels
        log_name: log_name
        redact: true
        min_level: null
      properties:
        channels:
          description: |-
            channels is a list of CRDB log channels to include in this
            group.
          items:
            type: string
          type: array
        log_name:
          title: "log_name is the name of the group, reflected in the log sink"
          type: string
        min_level:
          $ref: '#/components/schemas/LogLevel'
        redact:
          description: |-
            redact is a boolean that governs whether this log group
            should aggregate redacted logs. Redaction settings will
            inherit from the cluster log export defaults if unset.
          type: boolean
      required:
      - channels
      - log_name
      type: object
    LogExportStatus:
      description: |-
        LogExportStatus encodes the possible states that a configuration can
        be in as it is created, deployed, and disabled.
      enum:
      - DISABLED
      - DISABLING
      - DISABLE_FAILED
      - ENABLED
      - ENABLING
      - ENABLE_FAILED
      type: string
    LogExportType:
      description: |-
        LogExportType encodes the cloud selection that we're exporting to
        along with the cloud logging platform.

        Currently, each cloud has a single logging platform.
      enum:
      - AWS_CLOUDWATCH
      - GCP_CLOUD_LOGGING
      type: string
    LogLevel:
      description: " - WARNING: The WARNING severity is used for situations which\
        \ may require\nspecial handling, where normal operation is expected to resume\
        \ \nautomatically.\n - ERROR: The ERROR severity is used for situations that\
        \ require special \nhandling, where normal operation could not proceed as\
        \ expected. \nOther operations can continue mostly unaffected.\n - FATAL:\
        \ The FATAL severity is used for situations that require an \nimmediate, hard\
        \ server shutdown. A report is also sent to \ntelemetry if telemetry is enabled."
      enum:
      - WARNING
      - ERROR
      - FATAL
      type: string
    MetricExportInfo:
      example:
        cluster_id: cluster_id
        integration:
        - datadog:
            site: null
            api_key: api_key
          user_message: user_message
          cloudwatch:
            target_region: target_region
            log_group_name: log_group_name
            role_arn: role_arn
          status: null
        - datadog:
            site: null
            api_key: api_key
          user_message: user_message
          cloudwatch:
            target_region: target_region
            log_group_name: log_group_name
            role_arn: role_arn
          status: null
      properties:
        cluster_id:
          type: string
        integration:
          items:
            $ref: '#/components/schemas/MetricExportIntegrationInfo'
          type: array
      type: object
    MetricExportIntegrationInfo:
      example:
        datadog:
          site: null
          api_key: api_key
        user_message: user_message
        cloudwatch:
          target_region: target_region
          log_group_name: log_group_name
          role_arn: role_arn
        status: null
      properties:
        cloudwatch:
          $ref: '#/components/schemas/CloudWatchConfig'
        datadog:
          $ref: '#/components/schemas/DatadogConfig'
        status:
          $ref: '#/components/schemas/MetricExportStatus'
        user_message:
          type: string
      type: object
    MetricExportIntegrationType:
      enum:
      - DATADOG
      - CLOUDWATCH
      type: string
    MetricExportStatus:
      enum:
      - NOT_DEPLOYED
      - DISABLING
      - ENABLING
      - ENABLED
      - ERROR
      type: string
    NetworkVisiblity:
      enum:
      - NETWORK_VISIBILITY_PUBLIC
      - NETWORK_VISIBILITY_PRIVATE
      type: string
    Node:
      example:
        name: name
        region_name: region_name
        status: null
      properties:
        name:
          type: string
        region_name:
          type: string
        status:
          $ref: '#/components/schemas/NodeStatus'
      required:
      - name
      - region_name
      - status
      type: object
    NodeStatus:
      enum:
      - LIVE
      - NOT_READY
      type: string
    OperatingSystem:
      enum:
      - OS_MAC
      - OS_LINUX
      - OS_WINDOWS
      type: string
    Organization:
      example:
        name: name
        created_at: 2000-01-23T04:56:07.000+00:00
        id: id
        label: label
      properties:
        created_at:
          format: date-time
          type: string
        id:
          type: string
        label:
          type: string
        name:
          type: string
      required:
      - created_at
      - id
      - label
      - name
      type: object
    Plan:
      description: " - DEDICATED: A paid plan that offers dedicated hardware in any\
        \ location.\n - CUSTOM: A plan option that is used for clusters whose machine\
        \ configs are not \nsupported in self-service. All INVOICE clusters are under\
        \ this plan option.\n - SERVERLESS: A paid plan that runs on shared hardware\
        \ and caps the users'\nmaximum monthly spending to a user-specified (possibly\
        \ 0) amount."
      enum:
      - DEDICATED
      - CUSTOM
      - SERVERLESS
      type: string
    PrivateEndpointService:
      example:
        cloud_provider: null
        region_name: region_name
        aws:
          availability_zone_ids:
          - availability_zone_ids
          - availability_zone_ids
          service_name: service_name
          service_id: service_id
        status: null
      properties:
        aws:
          $ref: '#/components/schemas/AWSPrivateLinkServiceDetail'
        cloud_provider:
          $ref: '#/components/schemas/api.CloudProvider'
        region_name:
          description: region_name is the cloud provider region name (i.e. us-east-1).
          type: string
        status:
          $ref: '#/components/schemas/PrivateEndpointServiceStatus'
      required:
      - aws
      - cloud_provider
      - region_name
      - status
      type: object
    PrivateEndpointServiceStatus:
      description: |-
        - ENDPOINT_SERVICE_STATUS_DELETE_FAILED: One note is that if the service is deleted, there is no longer
        a record, hence there is no "DELETED" status.
      enum:
      - ENDPOINT_SERVICE_STATUS_CREATING
      - ENDPOINT_SERVICE_STATUS_AVAILABLE
      - ENDPOINT_SERVICE_STATUS_CREATE_FAILED
      - ENDPOINT_SERVICE_STATUS_DELETING
      - ENDPOINT_SERVICE_STATUS_DELETE_FAILED
      title: Private Endpoints
      type: string
    PrivateEndpointServices:
      example:
        services:
        - cloud_provider: null
          region_name: region_name
          aws:
            availability_zone_ids:
            - availability_zone_ids
            - availability_zone_ids
            service_name: service_name
            service_id: service_id
          status: null
        - cloud_provider: null
          region_name: region_name
          aws:
            availability_zone_ids:
            - availability_zone_ids
            - availability_zone_ids
            service_name: service_name
            service_id: service_id
          status: null
      properties:
        services:
          description: services contains a list of all cluster related services.
          items:
            $ref: '#/components/schemas/PrivateEndpointService'
          type: array
      required:
      - services
      type: object
    QuantityUnitType:
      description: |-
        Billing
        QuantityUnitType is the unit type for a quantity of billing line item.
      enum:
      - HOURS
      - REQUEST_UNITS
      type: string
    Region:
      properties:
        internal_dns:
          description: internal_dns is the internal DNS name of the cluster within
            the cloud provider's network. It is used to connect to the cluster with
            PrivateLink or VPC peering.
          type: string
        name:
          type: string
        node_count:
          description: node_count will be 0 for serverless clusters.
          format: int32
          type: integer
        sql_dns:
          description: sql_dns is the DNS name of SQL interface of the cluster. It
            is used to connect to the cluster with IP allowlisting.
          type: string
        ui_dns:
          description: ui_dns is the DNS name used when connecting to the DB Console
            for the cluster.
          type: string
      required:
      - internal_dns
      - name
      - node_count
      - sql_dns
      - ui_dns
      type: object
    SQLUser:
      example:
        name: name
      properties:
        name:
          type: string
      required:
      - name
      type: object
    ServerlessClusterConfig:
      properties:
        routing_id:
          description: Used to build a connection string.
          type: string
        spend_limit:
          description: Spend limit in US cents.
          format: int32
          type: integer
      required:
      - routing_id
      - spend_limit
      type: object
    ServerlessClusterCreateSpecification:
      properties:
        primary_region:
          description: |-
            Specify which region should be made the primary region.
            This is only applicable to multi-region Serverless clusters.
            This field is required if you create the cluster in more than
            one region.
          type: string
        regions:
          description: |-
            Region values should match the cloud provider's zone code.
            For example, for Oregon, set region_name to "us-west2" for
            GCP and "us-west-2" for AWS.
          items:
            type: string
          type: array
        spend_limit:
          format: int32
          title: Spend limit in US cents
          type: integer
      required:
      - regions
      - spend_limit
      type: object
    ServerlessClusterUpdateSpecification:
      properties:
        spend_limit:
          format: int32
          title: Spend limit in US cents
          type: integer
      required:
      - spend_limit
      type: object
    SortOrder:
      description: |2-
         - ASC: Sort in ascending order. This is the default unless otherwise specified.
         - DESC: Sort in descending order.
      enum:
      - ASC
      - DESC
      type: string
    Status:
      properties:
        code:
          format: int32
          type: integer
        details:
          items:
            $ref: '#/components/schemas/Any'
          type: array
        message:
          type: string
      type: object
    UpdateClusterSpecification:
      description: "Set `upgrade_status` to 'UPGRADE_RUNNING' to start an upgrade.\
        \ Multi-node clusters will undergo a rolling upgrade and will remain available,\
        \ but single-node clusters will be briefly unavailable while the upgrade takes\
        \ place. Upgrades will be finalized automatically after 72 hours, or can be\
        \ manually finalized by setting the value to 'FINALIZED'. Before the cluster\
        \ is finalized, it can be rolled back by setting the value to 'ROLLBACK_RUNNING'.\
        \ Version upgrade operations cannot be performed simultaneously with other\
        \ update operations."
      example:
        dedicated:
          hardware:
            machine_spec:
              machine_type: n2-standard-8
          region_nodes:
            us-central1: 5
            us-west1: 3
        upgrade_status: UPGRADE_RUNNING
      properties:
        dedicated:
          $ref: '#/components/schemas/DedicatedClusterUpdateSpecification'
        serverless:
          $ref: '#/components/schemas/ServerlessClusterUpdateSpecification'
        upgrade_status:
          $ref: '#/components/schemas/ClusterUpgradeStatus'
      type: object
    api.CloudProvider:
      description: |2-
         - GCP: The Google Cloud Platform cloud provider.
         - AWS: The Amazon Web Services cloud provider.
      enum:
      - GCP
      - AWS
      type: string
    api.Database:
      example:
        table_count: table_count
        name: name
      properties:
        name:
          type: string
        table_count:
          format: int64
          type: string
      required:
      - name
      title: Database
      type: object
    api.ListDatabasesResponse:
      example:
        databases:
        - table_count: table_count
          name: name
        - table_count: table_count
          name: name
        pagination:
          next_page: next_page
          previous_page: previous_page
      properties:
        databases:
          items:
            $ref: '#/components/schemas/api.Database'
          type: array
        pagination:
          $ref: '#/components/schemas/KeysetPaginationResponse'
      required:
      - databases
      title: ListDatabasesResponse
      type: object
    CMEKClusterSpecification:
      example:
        region_specs:
        - key_spec:
            auth_principal: arn:aws:iam::account:role/role-name-with-path
            type: AWS_KMS
            uri: arn:aws:kms:us-west-2:111122223333:key/id-of-kms-key
          region: us-central1
      properties:
        region_specs:
          items:
            $ref: '#/components/schemas/CMEKRegionSpecification'
          type: array
      required:
      - region_specs
      title: CMEKClusterSpecification
      type: object
    UpdateCMEKStatusRequest:
      example:
        action: REVOKE
      properties:
        action:
          $ref: '#/components/schemas/CMEKCustomerAction'
      required:
      - action
      title: UpdateCMEKStatusRequest
      type: object
    CreateDatabaseRequest:
      example:
        name: example_database_name
      properties:
        name:
          type: string
      required:
      - name
      title: CreateDatabaseRequest
      type: object
    UpdateDatabaseRequest:
      example:
        new_name: example_new_database_name
      properties:
        name:
          type: string
        new_name:
          type: string
      required:
      - name
      - new_name
      title: UpdateDatabaseRequest
      type: object
    EnableLogExportRequest:
      example:
        auth_principal: my-gcp-project-id
        groups:
        - channels:
          - OPS
          - HEALTH
          log_name: devops
          min_level: WARNING
        log_name: default
        redact: true
        type: GCP_CLOUD_LOGGING
      properties:
        auth_principal:
          description: |-
            auth_principal is either the AWS Role ARN that identifies a role
            that the cluster account can assume to write to CloudWatch or the
            GCP Project ID that the cluster service account has permissions to
            write to for cloud logging.
          type: string
        groups:
          description: |-
            groups is a collection of log group configurations that allows the
            customer to define collections of CRDB log channels that are aggregated
            separately at the target sink.
          items:
            $ref: '#/components/schemas/LogExportGroup'
          type: array
        log_name:
          description: log_name is an identifier for the logs in the customer's log
            sink.
          type: string
        redact:
          description: |-
            redact allows the customer to set a default redaction policy for
            logs before they are exported to the target sink. If a group config
            omits a redact flag and this one is set to `true`, then that group
            will receive redacted logs.
          type: boolean
        region:
          description: |-
            region allows the customer to override the destination region for
            all logs for a cluster.
          type: string
        type:
          $ref: '#/components/schemas/LogExportType'
      required:
      - auth_principal
      - log_name
      - type
      title: EnableLogExportRequest
      type: object
    EnableMetricExportRequest:
      example:
        datadog:
          api_key: datadog_api_key
          site: US1
      properties:
        cloudwatch:
          $ref: '#/components/schemas/CloudWatchConfig'
        datadog:
          $ref: '#/components/schemas/DatadogConfig'
      title: EnableMetricExportRequest
      type: object
    AllowlistEntry_1:
      example:
        cidr_ip: 192.168.1.1
        cidr_mask: 32
        name: Example
        sql: true
        ui: true
      properties:
        name:
          type: string
        sql:
          type: boolean
        ui:
          type: boolean
      required:
      - sql
      - ui
      title: AllowlistEntry
      type: object
    CockroachCloud_SetAwsEndpointConnectionState_request:
      example:
        status: ENDPOINT_AVAILABLE
      properties:
        status:
          $ref: '#/components/schemas/AWSEndpointConnectionStatus'
      type: object
    AddEgressRuleRequest:
      description: AddEgressRuleRequest is the input for the rpc AddEgressRule().
      example:
        cluster_id: 35c4abb2-bb66-46d7-afed-25ebef5ed100
        description: egress for GCP storage buckets
        destination: storage.googleapis.com
        name: roach-buckets
        paths:
        - /customer-managed-bucket-1/*
        - /customer-managed-bucket-2/*
        ports:
        - 443
        - 80
        type: FQDN
      properties:
        description:
          description: description is text that serves to document the rules purpose.
          type: string
        destination:
          description: |-
            destination is the endpoint (or subnetwork if CIDR) to which traffic is
            allowed.
          type: string
        idempotency_key:
          description: |-
            idempotency_key uniquely identifies this request. If not set, it will be
            set by the server.
          type: string
        name:
          description: name is the name of the egress rule.
          type: string
        paths:
          description: |-
            paths are the allowed URL paths. If empty, all paths are allowed. Only
            valid if Type="FQDN".
          items:
            type: string
          type: array
        ports:
          description: |-
            ports are the allowed ports for TCP protocol. If Empty, all ports are
            allowed.
          items:
            format: int32
            type: integer
          type: array
        type:
          description: |-
            type classifies the Destination field. Valid types include: "FQDN",
            "CIDR".
          type: string
      required:
      - description
      - destination
      - name
      - type
      title: AddEgressRuleRequest
      type: object
    SetEgressTrafficPolicyRequest:
      description: SetEgressTrafficPolicyRequest is the input for the SetEgressTrafficPolicy
        RPC.
      example:
        idempotency_key: idempotency_key
        allow_all: true
      properties:
        allow_all:
          description: |-
            allow_all, if true results in unrestricted egress traffic. If false, egress
            traffic is set to default-deny and is managed via the Egress Rule
            Management API.
          type: boolean
        idempotency_key:
          description: |-
            idempotency_key uniquely identifies this request. If not set, it will be
            set by the server.
          type: string
      required:
      - allow_all
      title: SetEgressTrafficPolicyRequest
      type: object
    EditEgressRuleRequest:
      description: EditEgressRuleRequest is the input message to the EditEgressRule
        RPC.
      example:
        cluster_id: 35c4abb2-bb66-46d7-afed-25ebef5ed100
        ports:
        - 443
        - 80
        rule_id: 35c4abb2-bb66-46d7-afed-25ebef5ed2aa
      properties:
        description:
          description: description is text that serves to document the rules purpose.
          type: string
        destination:
          description: |-
            destination is a CIDR range or fully-qualified domain name to which
            outgoing traffic should be allowed. This field is required.
          type: string
        idempotency_key:
          description: |-
            idempotency_key uniquely identifies this request. If not set, it will be
            set by the server.
          type: string
        paths:
          description: |-
            paths are the allowed URL paths. If empty, all paths are allowed. Only
            valid if Type="FQDN".
          items:
            type: string
          type: array
        ports:
          description: |-
            ports are the allowed ports for TCP protocol. If empty, all ports are
            allowed.
          items:
            format: int32
            type: integer
          type: array
        type:
          description: |-
            type is the destination type of this rule. Example values are
            FQDN or CIDR. This field is required.
          type: string
      title: EditEgressRuleRequest
      type: object
    CreateSQLUserRequest:
      example:
        name: example_username
        password: example_password
      properties:
        name:
          type: string
        password:
          type: string
      required:
      - name
      - password
      title: CreateSQLUserRequest
      type: object
    UpdateSQLUserPasswordRequest:
      example:
        password: example_new_password
      properties:
        password:
          type: string
      required:
      - password
      title: UpdateSQLUserPasswordRequest
      type: object
  securitySchemes:
    Bearer:
      scheme: bearer
      type: http
